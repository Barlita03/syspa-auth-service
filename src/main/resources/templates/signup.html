<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <title>Sign up</title>
    </head>
    <body>
        <h2>Mi Sign up</h2>
        <form>
            <div>
                <label>Usuario:</label>
                <input type="text" id="username"/>
            </div>
            <div>
                <label>Contraseña:</label>
                <input type="password" id="password"/>
            </div>
            <div>
                <button type="submit" id="submit">Sign up</button>
            </div>
        </form>
    </body>
</html>
<script>
    document.getElementById("submit").onclick = function(event) {
        event.preventDefault(); // Evita el envío del formulario por defecto

        const username = document.getElementById("username").value;
        const password = document.getElementById("password").value;

        fetch('/signup', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ username: username, password: password })
        })
        .then(response => {
            if (response.ok) {
                alert('Usuario registrado con éxito');
                window.location.href = '/login'; // Redirige a la página de login
            } else {
                return response.json().then(data => {
                    throw new Error(data.message || 'Error al registrar el usuario');
                });
            }
        })
        .catch(error => {
            alert('Error: ' + error.message);
        });
    };
</script>
